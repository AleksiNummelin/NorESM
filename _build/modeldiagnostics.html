

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Model Diagnostic Tools &mdash; norESM  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using the issue tracker" href="usingtheissuetracker.html" />
    <link rel="prev" title="Setting up CAM on your own linux PC" href="settingupcamonlinuxpc.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> norESM
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Content:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="start.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/newbie.html">Newbies guide to running NorESM</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/advanced.html">Advanced configuration (NorESM1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/advancednoresm2.html">Advanced configuration of NorESM2</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/fluxescrossingboundaries.html">Fluxes crossing boundaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/cmip6_volcanic_forcing.html">CMIP6 volcanic forcing</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/cmip6emissionsofshortlivedcomponents.html">CMIP6 emissions of short-lived components</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/noresm2_output.html">Atmospheric output for some commonly used configurations of NorESM2</a></li>
<li class="toctree-l1"><a class="reference internal" href="settingupcamonlinuxpc.html">Setting up CAM on your own linux PC</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Model Diagnostic Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#noresm-diagnostic-packages">NorESM Diagnostic Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#recent-updates">Recent updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-diag-run-with-cron">Using diag_run with cron</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-tips">Other tips</a></li>
<li class="toctree-l3"><a class="reference internal" href="#noresm-diagnostics-on-github">NorESM diagnostics on GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-a-run-with-more-aerosol-diagnostics-in-noresm2">Configuring a run with more aerosol diagnostics in (NorESM2)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tracer-budget-terms">Tracer Budget terms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fields-produced-in-monthly-average-files-when-running-with-budgets-activated">Fields produced in monthly average files when running with budgets activated</a></li>
<li class="toctree-l3"><a class="reference internal" href="#looking-at-the-aerosol-budgets-cam-oslo-only">Looking at the aerosol budgets (CAM-Oslo only)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ncl-model-version-comparison-package-alf-k">NCL Model Version Comparison package (Alf K)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#making-ncl-plots-of-often-used-aerosol-and-cloud-fields-including-erfs-for-two-model-versions-cam-oslo-only">Making ncl plots of often used aerosol and cloud fields, including ERFs, for two model versions (CAM-Oslo only)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cloud-water-mass-and-number-analysis-budgets">Cloud water mass and number analysis (budgets)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-a-run-with-more-cloud-diagnostics-in-noresm2">Configuring a run with more cloud diagnostics in NorESM2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#automatic-aerocom-analysis">Automatic AEROCOM analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usingtheissuetracker.html">Using the issue tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="testlist.html">Test list for NorESM</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html">Obtain a copy of the model (using git)</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html#verify-that-you-have-the-correct-checkout">Verify that you have the correct checkout</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html#modify-files">Modify files</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html#get-modifications-from-github">Get modifications from github</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html#send-modifications-to-github">Send modifications to github</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html#if-you-don-t-understand-and-want-to-get-back-to-svn">If you don’t understand and want to get back to svn</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html">What is a branch?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#when-should-i-work-on-a-branch">When should I work on a branch?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#how-should-i-name-the-branch">How should I name the branch?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#a-note-on-branch-tag-naming">A note on branch / tag naming</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#how-and-when-should-i-merge-from-trunk-to-my-branch">How and when should I merge from trunk to my branch?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#how-can-i-merge-my-branch-back-into-the-trunk">How can I merge my branch back into the trunk?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#what-is-a-tag">What is a tag?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#when-should-i-create-a-tag">When should I create a tag?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#what-tags-exist">What tags exist?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#how-should-i-name-the-tag">How should I name the tag?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#tagging-noresm0-and-noresm1-branches">Tagging noresm0 and noresm1 branches?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#case-1">Case 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#case-2">Case 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#case-3">Case 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#what-should-be-stated-in-the-commit-message">What should be stated in the commit message?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#what-should-be-stated-in-the-copy-message-of-a-branch">What should be stated in the copy message of a branch?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnbestpractice.html#what-should-be-stated-in-the-copy-message-of-a-tag">What should be stated in the copy message of a tag?</a></li>
<li class="toctree-l1"><a class="reference internal" href="svnnorstorehowto.html">Subversion how-to for NorStore</a></li>
<li class="toctree-l1"><a class="reference internal" href="uncertainaerosolparameters.html">Uncertain parameters (which can be discussed) in the aerosol model</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Model Diagnostic Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#noresm-diagnostic-packages">NorESM Diagnostic Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#recent-updates">Recent updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-diag-run-with-cron">Using diag_run with cron</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-tips">Other tips</a></li>
<li class="toctree-l3"><a class="reference internal" href="#noresm-diagnostics-on-github">NorESM diagnostics on GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-a-run-with-more-aerosol-diagnostics-in-noresm2">Configuring a run with more aerosol diagnostics in (NorESM2)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tracer-budget-terms">Tracer Budget terms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fields-produced-in-monthly-average-files-when-running-with-budgets-activated">Fields produced in monthly average files when running with budgets activated</a></li>
<li class="toctree-l3"><a class="reference internal" href="#looking-at-the-aerosol-budgets-cam-oslo-only">Looking at the aerosol budgets (CAM-Oslo only)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ncl-model-version-comparison-package-alf-k">NCL Model Version Comparison package (Alf K)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#making-ncl-plots-of-often-used-aerosol-and-cloud-fields-including-erfs-for-two-model-versions-cam-oslo-only">Making ncl plots of often used aerosol and cloud fields, including ERFs, for two model versions (CAM-Oslo only)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cloud-water-mass-and-number-analysis-budgets">Cloud water mass and number analysis (budgets)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-a-run-with-more-cloud-diagnostics-in-noresm2">Configuring a run with more cloud diagnostics in NorESM2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#automatic-aerocom-analysis">Automatic AEROCOM analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="norstoretape.html">NorStore Tape Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="norstorearchive.html">NorStore Research Data Archive: Guidelines for ingestion of NorESM output</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Existing projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">norESM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Model Diagnostic Tools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/modeldiagnostics.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="model-diagnostic-tools">
<span id="modeldiagnostics"></span><h1>Model Diagnostic Tools<a class="headerlink" href="#model-diagnostic-tools" title="Permalink to this headline">¶</a></h1>
<p>This page links to tools used for the NorESM model evaluation.</p>
<div class="section" id="noresm-diagnostic-packages">
<h2>NorESM Diagnostic Packages<a class="headerlink" href="#noresm-diagnostic-packages" title="Permalink to this headline">¶</a></h2>
<p>Output from the latest NCAR diagnostic pages can be found on nird here:</p>
<p>via the web: <a class="reference external" href="http://ns2345k.web.sigma2.no/noresm_diagnostics/">http://ns2345k.web.sigma2.no/noresm_diagnostics/</a></p>
<p>via the filesystem on nird here:
/projects/NS2345K/www/noresm_diagnostics/</p>
<p>The diagnostics packages are currently available on NIRD. Each package
can be run/configured from the command line using the program diag_run:</p>
<hr class="docutils" />
<p>Program: /projects/NS2345K/noresm_diagnostics/bin/diag_run Version: 5.1</p>
<hr class="docutils" />
<p>Short description: A wrapper script for NorESM diagnostic packages.</p>
<p>Basic usage: diag_run -m [model] -c [test case name] -s [test case start
yr] -e [test case end yr] # Run model-obs diagnostics diag_run -m
[model] -c [test case name] -s [test case start yr] -e [test case end
yr] -c2 [cntl case name] -s2 [cntl case start yr] -e2 [cntl case end yr]
# Run model1-model2 diagnostics nohup
/projects/NS2345K/noresm_diagnostics/bin/diag_run -m [model] -c [test
case name] -s [test case start yr] -e [test case end yr] &amp;&gt; out &amp; # Run
model-obs diagnostics in the background with nohup</p>
<p>Command-line options: -m, –model=MODEL Specify the diagnostics package
(REQUIRED).</p>
<div class="line-block">
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Valid&nbsp;arguments:``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cam&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;atmospheric&nbsp;package&nbsp;(AMWG)``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clm&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;land&nbsp;package&nbsp;(LMWG)``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cice&nbsp;&nbsp;&nbsp;:&nbsp;sea-ice&nbsp;package``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;micom&nbsp;&nbsp;:&nbsp;ocean&nbsp;package``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hamocc&nbsp;:&nbsp;biogeochemistry&nbsp;package``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;configure&nbsp;all&nbsp;available&nbsp;packages.``</div>
</div>
<p>-c, -c1, –case=CASE1, –case1=CASE1 Test case simulation (OPTIONAL).
-s, -s1, –start_yr=SYR1, –start_yr1=SYR1 Start year of test case
climatology (OPTIONAL). -e, -e1, –end_yr=EYR1, –end_yr1=EYR1 End year
of test case climatology (OPTIONAL). -c2, –case2=CASE2 Control case
simulation (OPTIONAL). -s2, –start_yr2=SYR2 Start year of control case
climatology (OPTIONAL). -e2, –end_yr2=EYR2 End year of control case
climatology (OPTIONAL). -i, -i1, –input-dir=DIR, –input-dir1=DIR
Specify the directory where the test case history files are located
(OPTIONAL).</p>
<p>``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default&nbsp;is&nbsp;–input-dir=/projects/NS2345K/noresm/cases``</p>
<p>-i2, –input-dir2=DIR Specify the directory where the control case
history files are located (OPTIONAL).</p>
<p>``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default&nbsp;is&nbsp;–input-dir=/projects/NS2345K/noresm/cases``</p>
<p>-o, –output-dir=DIR Specify the directory where the package(s) the
climatology and time-series files should be stored (OPTIONAL).</p>
<p>``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default&nbsp;is&nbsp;–output-dir=/projects/NS2345K/noresm_diagnostics/out/$USER``</p>
<p>-p, –passive-mode Run the script in passive mode: the diagnostic script
will be configured but not executed (OPTIONAL). -t, –type=TYPE Specify
climatology or time series diagnostics (OPTIONAL): valid options are
–type=climo and –type=time_series.</p>
<p>``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default&nbsp;is&nbsp;to&nbsp;run&nbsp;both.&nbsp;Note&nbsp;that&nbsp;the&nbsp;time&nbsp;series&nbsp;are&nbsp;computed&nbsp;over&nbsp;the&nbsp;entire&nbsp;simulation.``</p>
<p>-w, –web-dir=DIR Specify the directory where the html should be
published (OPTIONAL).</p>
<p>``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default&nbsp;is&nbsp;–web-dir=/projects/NS2345K/www/noresm_diagnostics``</p>
<p>–no-atm Run CLM diagnostics without CAM data. Must be used for offline
CLM simulations.</p>
<p>Examples: diag_run -m all -c N1850_f19_tn11_exp1 -s 21 -e 50 # model-obs
diagnostics of case=N1850_f19_tn11_exp1 (climatology between yrs 21 and
50) for all model components. diag_run -m cam -c N1850_f19_tn11_exp1 -s
21 -e 50 -w /path/to/my/html # model-obs diagnostics in CAM, publish the
html in /path/to/my/html. diag_run -m micom -c N1850_f19_tn11_exp1 -t
time_series # model-obs time-series diagnostics in MICOM for all years
represented in the model output directory
(/projects/NS2345K/noresm/cases/N1850_f19_tn11_exp1/ocn/hist/). diag_run
-m cice -c N1850_f19_tn11_exp1 -s 21 -e 50 -p # configure (but do not
run) model-obs diagnostics for CICE. diag_run -m clm -c
N1850_f19_tn11_exp1 -s 21 -e 50 -i /input/directory1 -c2
N1850_f19_tn11_exp2 -s2 21 -e2 50 -i2 /input/directory2 # model1-model2
diagnostics for CLM with user-specified history file directories
diag_run -m micom -c N1850_f19_tn11_exp1 -s 21 -e 50 -t climo #
model-obs climatology diagnostics (no time series) for MICOM: diag_run
-m cam -o /my/dir # install CAM diagnostics in /my/dir with minimal
configuration. diag_run -m micom,hamocc -c N1850OC_f19_tn11_exp1 -s 21
-e 50 # model-obs diagnostics for MICOM and HAMOCC. diag_run -m clm -c
N1850_f19_tn11_clmexp1 -s 71 -e 100 –no-atm # model-obs time-series
diagnostics for an offline (uncoupled) CLM simulation. diag_run -m
hamocc -c N1850OC_f19_tn11_exp1 -s 31 -e 100 -t time_series # model-obs
time-series diagnostics in HAMOCC between yrs 31 and 100. A
comprehensive technical summary of diag_run (pdf): {{
:noresm:diag_run_documentation.pdf |}}</p>
<p>Report any problems, comments or suggestions to Yanchun He:
<a class="reference external" href="mailto:yanchun&#46;he&#37;&#52;&#48;nersc&#46;no">yanchun<span>&#46;</span>he<span>&#64;</span>nersc<span>&#46;</span>no</a></p>
<div class="section" id="recent-updates">
<h3>Recent updates<a class="headerlink" href="#recent-updates" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">``&nbsp;*&nbsp;29.08.10.&nbsp;Update&nbsp;to&nbsp;v5.1:&nbsp;update&nbsp;NCO/NCL&nbsp;versions&nbsp;to&nbsp;support&nbsp;efficient&nbsp;process&nbsp;of&nbsp;compressed&nbsp;netcdf-4&nbsp;files.``</div>
<div class="line">``&nbsp;*&nbsp;29.06.18.&nbsp;Update&nbsp;to&nbsp;v5.0:&nbsp;new&nbsp;fields&nbsp;to&nbsp;HAMOCC&nbsp;and&nbsp;MICOM&nbsp;diagnostics;&nbsp;minor&nbsp;fixes&nbsp;to&nbsp;other&nbsp;issues.``</div>
<div class="line">``&nbsp;*&nbsp;20.04.18.&nbsp;Update&nbsp;to&nbsp;v4.3:&nbsp;added&nbsp;new&nbsp;fields&nbsp;to&nbsp;HAMOCC&nbsp;diagnostics.``</div>
<div class="line">``&nbsp;*&nbsp;19.04.18.&nbsp;Update&nbsp;to&nbsp;v4.2:&nbsp;included&nbsp;ability&nbsp;to&nbsp;do&nbsp;time-series&nbsp;diagnostics&nbsp;between&nbsp;two&nbsp;user-specified&nbsp;years.``</div>
<div class="line">``&nbsp;*&nbsp;18.04.18.&nbsp;Update&nbsp;to&nbsp;v4.1:&nbsp;improved&nbsp;climatology&nbsp;and&nbsp;time-series&nbsp;calculations&nbsp;in&nbsp;CLM,&nbsp;and&nbsp;introduction&nbsp;of&nbsp;the&nbsp;–no-atm&nbsp;option&nbsp;to&nbsp;enable&nbsp;diagnostics&nbsp;for&nbsp;offline&nbsp;CLM&nbsp;simulations.``</div>
<div class="line">``&nbsp;*&nbsp;09.04.18.&nbsp;Update&nbsp;to&nbsp;v4.0:&nbsp;included&nbsp;the&nbsp;HAMOCC&nbsp;diagnostics&nbsp;package.``</div>
<div class="line">``&nbsp;*&nbsp;23.02.18.&nbsp;Update&nbsp;to&nbsp;v3.1:&nbsp;added&nbsp;monthly&nbsp;MLD,&nbsp;seasonal&nbsp;SST/SSS&nbsp;and&nbsp;annual&nbsp;meridional&nbsp;heat/salinity&nbsp;fluxes&nbsp;to&nbsp;the&nbsp;MICOM&nbsp;diagnostics.``</div>
<div class="line">``&nbsp;*&nbsp;17.01.18.&nbsp;Update&nbsp;to&nbsp;v3.0:&nbsp;the&nbsp;first&nbsp;version&nbsp;of&nbsp;MICOM&nbsp;diagnostics&nbsp;has&nbsp;been&nbsp;included.``</div>
<div class="line">``&nbsp;*&nbsp;28.11.17.&nbsp;Update&nbsp;to&nbsp;v2.0:&nbsp;included&nbsp;a&nbsp;set&nbsp;of&nbsp;time&nbsp;series&nbsp;plots&nbsp;in&nbsp;CAM&nbsp;diagnostics,&nbsp;along&nbsp;with&nbsp;an&nbsp;html&nbsp;interface,&nbsp;which&nbsp;can&nbsp;be&nbsp;accessed&nbsp;from&nbsp;the&nbsp;index&nbsp;page&nbsp;(sets.htm).&nbsp;``</div>
</div>
</div>
<div class="section" id="using-diag-run-with-cron">
<h3>Using diag_run with cron<a class="headerlink" href="#using-diag-run-with-cron" title="Permalink to this headline">¶</a></h3>
<p>If you want to use diag_run with crontab, you first need to load
$HOME/.bash_profile, i.e.:</p>
<ol class="arabic simple">
<li></li>
</ol>
<p>#. Min Hour Day Month Weekday Command(s)
#.</p>
<blockquote>
<div></div></blockquote>
<p>50 09 23 11 * . $HOME/.bash_profile;
/projects/NS2345K/noresm_diagnostics/bin/diag_run -m cam,cice -c
N18_f19_tn11_080617 -s 21 -e 50 -o /scratch/$USER/noresm_diagnostics2 -w
\ /projects/NS2345K/www/test -t time_series &gt;&amp; /scratch/$USER/cron_out</p>
</div>
<div class="section" id="other-tips">
<h3>Other tips<a class="headerlink" href="#other-tips" title="Permalink to this headline">¶</a></h3>
<p>It is useful to add diag_run as an alias in $HOME/.bashrc, so that you
do not need to write out the whole path every time you run it: alias
diag_run=’/projects/NS2345K/noresm_diagnostics/bin/diag_run’</p>
</div>
<div class="section" id="noresm-diagnostics-on-github">
<h3>NorESM diagnostics on GitHub<a class="headerlink" href="#noresm-diagnostics-on-github" title="Permalink to this headline">¶</a></h3>
<p>The NorESM diagnostics packages and diag_run are included in the Git
version control repository: <a class="reference external" href="https://github.com/johiak/NoresmDiagnostics">https://github.com/johiak/NoresmDiagnostics</a></p>
<p>Aerosol and Chemistry, Clouds and Forcing Diagnostics</p>
<p>In both the default CAM5-aerosol packages (MAM3,MAM7) and the
Oslo-aerosol packages, the budget terms can be taken out using a
variable in the namelist :</p>
</div>
<div class="section" id="configuring-a-run-with-more-aerosol-diagnostics-in-noresm2">
<h3>Configuring a run with more aerosol diagnostics in (NorESM2)<a class="headerlink" href="#configuring-a-run-with-more-aerosol-diagnostics-in-noresm2" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>&amp;phys_ctl_nl history_aerosol = .true. /</div></blockquote>
<p>Two more diagnostics are useful:</p>
<div class="line-block">
<div class="line">``&nbsp;*&nbsp;Enable&nbsp;estimates&nbsp;multiple&nbsp;calls&nbsp;to&nbsp;radiation&nbsp;which&nbsp;are&nbsp;necessary&nbsp;for&nbsp;effective&nbsp;radiative&nbsp;forcing&nbsp;estimates``</div>
<div class="line">``&nbsp;*&nbsp;Enable&nbsp;diagnostics&nbsp;for&nbsp;AEROCOM``</div>
</div>
<p>To enable this, take the file cam/src/physics/cam_oslo$ vim
preprocessorDefinitions.h and copy it to your SourceMods/src.cam folder</p>
<p>Change both preprocessor definitions to true</p>
<ol class="arabic simple">
<li>define AEROCOM</li>
<li>define AEROFFL</li>
</ol>
<p>The AEROCOM-token turns on diagnostics needed for AEROCOM The
AEROFFL-token tells the model to do additional radiation-diagnostics for
aerosol indirect effect</p>
</div>
</div>
<div class="section" id="tracer-budget-terms">
<h2>Tracer Budget terms<a class="headerlink" href="#tracer-budget-terms" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fields-produced-in-monthly-average-files-when-running-with-budgets-activated">
<h3>Fields produced in monthly average files when running with budgets activated<a class="headerlink" href="#fields-produced-in-monthly-average-files-when-running-with-budgets-activated" title="Permalink to this headline">¶</a></h3>
<p>Running with budgets activated will produce the following terms in the
monthly output files:</p>
<p>^ Output variable name ^ Meaning ^ Comment ^ | SF{Tracer} | Emissions
from surface | | | GS_{Tracer} | gas phase chemistry | 3D-emissions
and gas phase washout included in this term | | AQ_{Tracer} | aquous
chemistry | | | {Tracer}_Mixnuc1 | Activation in clouds and
evaporation of cloud droplets | | | {Tracer}_DDF | Dry deposition
flux (aerosol tracers) | | | {Tracer}_SFWET | Wet deposition flux
(aerosol tracers) | | | {Tracer}_condtend | loss/production in
condensation/nuclation | (CAM-Oslo only) | | {Tracer}_coagTend |
loss/production in coagulation | (CAM-Oslo only) | | DF_{Tracer} |
dry deposition flux (gas tracers) | output with history_aerosol with
CAM-Oslo only| | WD_A_{Tracer} | wet deposititon flux (gas tracers)
| output with history_aerosol with CAM-Oslo only| | {Tracer}_CLXF |
3D-emissions (“external forcing”) | output with history_aerosol with
CAM-Oslo only| | {Tracer}_clcoagTend | loss of tracer due to
coagulation with cloud droplets | output with history_aerosol with
CAM-Oslo only|</p>
<p>Note: Since 3D-emissions and and gas washout rates are included in the
term GS_{Tracer} in the mozart chemistry solver, the individual terms
can be found like this (example for SO2): ncap2 -O -s
GS_ONLY_SO2=GS_SO2-WD_A_SO2-SO2_CLXF infile.nc outfile.nc</p>
<p>More info on SO2 budgets (see
/models/atm/cam/tools/diagnostics/ncl/ModIvsModII/ for scripts with info
on all tracers):</p>
<p>GS_SO2 contains the SO2 budget terms for all that goes on in the
chemistry-routine, which is \ 1) Gas phase chemistry, 2) Wet
deposition, and 3) 3D-emissions.\Gas phase chemistry is both
production from DMS (GS_DMS) and loss through OH (GL_OH) \ For
calculations of net loss, e.g. used to calculate SO2 life-times, we’re
interested in the \ loss through OH from the chemistry-term
(GL_OH).\GS_SO2 = GL_OH + SO2_CLXF - WD_A_SO2 - GS_DMS*64/62 \ or
\ GL_OH = GS_SO2 - SO2_CLXF + WD_A_SO2 + GS_DMS*64/62 \</p>
<p>Estimating chemical loss w.r.t. S (instead of SO2 or DMS), for
comparison with CAM4-Oslo numbers:\net chemial loss gas phase =
(GS_SO2/1.998 - SO2_CLXF + WD_A_SO2)/1.998 + GS_DMS/1.938 \ net
chemical loss = net chemial loss gas phase + AQ_SO2/1.998 \</p>
<p>Finally, total net loss (used to calculate life-time = -load/(net loss),
where load = cb_SO2/1.998):\net loss = \ - WD_A_SO2/1.998 ;wet
deposition in kg/m2/sec (positive in output file) \ - DF_SO2/1.998
;dry deposition in kg/m2/sec (positive in output file) \ +
AQ_SO2/1.998 ;wet phase production of SO4 in kg/m2/ses (negative in
output file) \ + (GS_SO2 - SO2_CLXF + WD_A_SO2)/1.998 + GS_DMS/1.938
; net chemical loss gas phase \</p>
</div>
<div class="section" id="looking-at-the-aerosol-budgets-cam-oslo-only">
<h3>Looking at the aerosol budgets (CAM-Oslo only)<a class="headerlink" href="#looking-at-the-aerosol-budgets-cam-oslo-only" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">``&nbsp;*&nbsp;Go&nbsp;to&nbsp;the&nbsp;directory&nbsp;models/atm/cam/tools/diagnostics/ncl/budgets``</div>
<div class="line">``&nbsp;*&nbsp;Change&nbsp;the&nbsp;filename&nbsp;to&nbsp;use&nbsp;in&nbsp;the&nbsp;file&nbsp;budgets.ncl&nbsp;(“myFileName”&nbsp;around&nbsp;line&nbsp;18).&nbsp;Should&nbsp;be&nbsp;for&nbsp;example&nbsp;yearly&nbsp;average&nbsp;of&nbsp;month-avg&nbsp;file&nbsp;in&nbsp;a&nbsp;run&nbsp;with&nbsp;budgets``</div>
<div class="line">``&nbsp;*&nbsp;Run&nbsp;the&nbsp;script&nbsp;budgets.sh&nbsp;to&nbsp;create&nbsp;a&nbsp;pdf-file&nbsp;(output.pdf)``</div>
</div>
</div>
</div>
<div class="section" id="ncl-model-version-comparison-package-alf-k">
<h2>NCL Model Version Comparison package (Alf K)<a class="headerlink" href="#ncl-model-version-comparison-package-alf-k" title="Permalink to this headline">¶</a></h2>
<p>=</p>
<div class="section" id="making-ncl-plots-of-often-used-aerosol-and-cloud-fields-including-erfs-for-two-model-versions-cam-oslo-only">
<h3>Making ncl plots of often used aerosol and cloud fields, including ERFs, for two model versions (CAM-Oslo only)<a class="headerlink" href="#making-ncl-plots-of-often-used-aerosol-and-cloud-fields-including-erfs-for-two-model-versions-cam-oslo-only" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">``&nbsp;*&nbsp;Make&nbsp;a&nbsp;local&nbsp;copy&nbsp;(on&nbsp;Linux)&nbsp;of&nbsp;the&nbsp;directory&nbsp;models/atm/cam/tools/diagnostics/ncl/ModIvsModII``</div>
<div class="line">``&nbsp;*&nbsp;Assuming&nbsp;that&nbsp;you&nbsp;have&nbsp;produced&nbsp;output&nbsp;data&nbsp;from&nbsp;4&nbsp;simulations:&nbsp;two&nbsp;different&nbsp;model&nbsp;versions,&nbsp;each&nbsp;with&nbsp;PD&nbsp;and&nbsp;PI&nbsp;emissions,&nbsp;and&nbsp;all&nbsp;run&nbsp;with&nbsp;#define&nbsp;AEROCOM&nbsp;&amp;&nbsp;AEROFFL:&nbsp;&nbsp;&nbsp;``</div>
<div class="line">``&nbsp;*&nbsp;In&nbsp;ModIvsModII.csh&nbsp;(note:&nbsp;read&nbsp;the&nbsp;header&nbsp;info):``</div>
<div class="line">``&nbsp;*&nbsp;-&nbsp;edit&nbsp;model&nbsp;info&nbsp;for&nbsp;the&nbsp;first&nbsp;model&nbsp;(shown&nbsp;to&nbsp;the&nbsp;left&nbsp;in&nbsp;the&nbsp;plots):&nbsp;modelI&nbsp;=&nbsp;CAM4-Oslo&nbsp;or&nbsp;modelI&nbsp;=&nbsp;CAM5-Oslo&nbsp;?``</div>
<div class="line">``&nbsp;*&nbsp;-&nbsp;provide&nbsp;paths&nbsp;and&nbsp;partial&nbsp;file&nbsp;names&nbsp;of&nbsp;the&nbsp;model&nbsp;data&nbsp;(PD&nbsp;and&nbsp;PI)&nbsp;for&nbsp;Model&nbsp;I&nbsp;(CAM4-Oslo&nbsp;or&nbsp;CAM5-Oslo)&nbsp;and&nbsp;Model&nbsp;II&nbsp;(must&nbsp;be&nbsp;CAM5-Oslo)``</div>
<div class="line">``&nbsp;*&nbsp;-&nbsp;choose&nbsp;desired&nbsp;plot&nbsp;format&nbsp;(plotf=ps,&nbsp;eps,&nbsp;pdf&nbsp;or&nbsp;png)``</div>
<div class="line">``&nbsp;*&nbsp;Run&nbsp;the&nbsp;script:&nbsp;./ModIvsModII.csh``</div>
<div class="line">``&nbsp;*&nbsp;Furthermore,&nbsp;to&nbsp;display&nbsp;the&nbsp;plots&nbsp;in&nbsp;an&nbsp;organized&nbsp;form&nbsp;by&nbsp;use&nbsp;of&nbsp;a&nbsp;web&nbsp;browser&nbsp;(only&nbsp;possible&nbsp;if&nbsp;the&nbsp;chosen&nbsp;plot&nbsp;format&nbsp;is&nbsp;png):&nbsp;&nbsp;&nbsp;&nbsp;``</div>
<div class="line">``&nbsp;*&nbsp;-&nbsp;download&nbsp;htm&nbsp;template&nbsp;files&nbsp;from&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">```ftp://ftp.met.no/projects/noresmatm/upload/NorESM2Diagnostics/ModIvsModII/htm-templates/</span></code> &lt;<a class="reference external" href="ftp://ftp.met.no/projects/noresmatm/upload/NorESM2Diagnostics/ModIvsModII/htm-templates/">ftp://ftp.met.no/projects/noresmatm/upload/NorESM2Diagnostics/ModIvsModII/htm-templates/</a>&gt;`__</div>
<div class="line">``&nbsp;*&nbsp;-&nbsp;edit&nbsp;general&nbsp;model&nbsp;info&nbsp;(only)&nbsp;in&nbsp;ModIvsModII.htm,&nbsp;and&nbsp;manually&nbsp;cut&nbsp;and&nbsp;paste&nbsp;the&nbsp;mass&nbsp;budget&nbsp;numbers&nbsp;from&nbsp;the&nbsp;script&nbsp;output&nbsp;into&nbsp;this&nbsp;file&nbsp;``</div>
<div class="line">``&nbsp;*&nbsp;-&nbsp;copy&nbsp;all&nbsp;png&nbsp;(plots)&nbsp;and&nbsp;htm&nbsp;files&nbsp;to&nbsp;the&nbsp;desired&nbsp;output&nbsp;(common)&nbsp;directory``</div>
<div class="line">``&nbsp;*&nbsp;-&nbsp;open&nbsp;ModIvsModII.htm&nbsp;in&nbsp;your&nbsp;browser:&nbsp;hyper-links&nbsp;to&nbsp;all&nbsp;other&nbsp;htm&nbsp;files,&nbsp;including&nbsp;plots,&nbsp;are&nbsp;found&nbsp;here``</div>
<div class="line">``&nbsp;*&nbsp;Example:&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">```ftp://ftp.met.no/projects/noresmatm/upload/NorESM2Diagnostics/ModIvsModII/revision610inclSOA-Nudged_1984-12to1985-11_vs_CAM4-Oslo/ModIvsModII.htm</span></code> &lt;<a class="reference external" href="ftp://ftp.met.no/projects/noresmatm/upload/NorESM2Diagnostics/ModIvsModII/revision610inclSOA-Nudged_1984-12to1985-11_vs_CAM4-Oslo/ModIvsModII.htm">ftp://ftp.met.no/projects/noresmatm/upload/NorESM2Diagnostics/ModIvsModII/revision610inclSOA-Nudged_1984-12to1985-11_vs_CAM4-Oslo/ModIvsModII.htm</a>&gt;`__</div>
</div>
</div>
</div>
<div class="section" id="cloud-water-mass-and-number-analysis-budgets">
<h2>Cloud water mass and number analysis (budgets)<a class="headerlink" href="#cloud-water-mass-and-number-analysis-budgets" title="Permalink to this headline">¶</a></h2>
<p>=</p>
<div class="section" id="configuring-a-run-with-more-cloud-diagnostics-in-noresm2">
<h3>Configuring a run with more cloud diagnostics in NorESM2<a class="headerlink" href="#configuring-a-run-with-more-cloud-diagnostics-in-noresm2" title="Permalink to this headline">¶</a></h3>
<p>To switch on extra output for cloud diagnostics (mass and number
tendencies for liquid water and mass) change the following namelist
variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">phys_ctl_nl</span> <span class="n">history_budget</span> <span class="o">=</span> <span class="o">.</span><span class="n">true</span><span class="o">.</span> <span class="o">/</span>
</pre></div>
</div>
<p>A python script for plotting the mass and number budgets for the cloud
microphysics can be found under:</p>
<p>models/atm/cam/tools/diagnostics/ncl/cloudBudgets</p>
<p>in the same branch. Copy the script to your local computer or lustre and
edit the script to read the correct input file(s) (instructions inside
the script). Run the script by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">scriptname</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>in your terminal.</p>
</div>
</div>
<div class="section" id="automatic-aerocom-analysis">
<h2>Automatic AEROCOM analysis<a class="headerlink" href="#automatic-aerocom-analysis" title="Permalink to this headline">¶</a></h2>
<p>To prepare output so that it is processed automatically by the aerocom
tools, use the script located at **models/atm/cam/tools/aerocom/<a href="#id1"><span class="problematic" id="id2">*</span></a>* in
the svn repository. The script prepares files such that the idl aerocom
tools prepare plots for the aerocom webinterface: <a class="reference external" href="http://aerocom.met.no/cgi-bin/aerocom/surfobs_annualrs.pl?PROJECT=NorESM&amp;MODELLIST=NorESM-development&amp;FULL=explicit&amp;INFO=nohover&amp;PERFORMANCE=ind&amp;YEARFILTER=ALLYEARS&amp;PSFILTER=ALLVARS&amp;Type0=ZONALOBS&amp;Ref0=AERONETSun&amp;Run0=CAM53-Oslo_r773bNudge_151215AG_PD_DMS_733b&amp;Parameter0=OD550_AER&amp;Station0=WORLD&amp;Year0=an9999&amp;Period0=mALLYEAR">URL link to NorESM on
AeroCom
webinterface</a></p>
<p>The script requires _ and as input.</p>
<p>: for a climatological average and run choose 9999 , for nudged
simulations choose the year of the meteorology</p>
<p>_: is the dataset identifier under which the plots appear on the
AeroCom webinterface \ in the required format</p>
<ul class="simple">
<li>NorESM-CAM5_svn{RevisionNumber}_YYMMDD{initials}_Freetext**. \</li>
</ul>
<p>Example: “<strong>NorESM-CAM5_svn1094_151201AG_CMIP6endelig</strong>” \ Initials
AG: Alf Grini, AK: Alf Kirkevåg, DO: Dirk Olivie…</p>
<p>Where the date YYMMDD corresponds to the time when the AeroCom data
preparation script has been executed.</p>
<p>The script creates files named like</p>
<p>“aerocom3______.nc”</p>
<blockquote>
<div>⇒ eg NorESM-CAM53 \ ⇒ svn{RevisionNumber}_YYMMDD{initials}_Freetext</div></blockquote>
<p>\ ⇒ aerocom variable names \ ⇒ “Surface”, “Column”, “ModelLevel”,
“SurfaceAtStations”, “ModelLevelAtStations”&nbsp;\⇒ eg “2008”, “2010”,
“9999” \ ⇒ “timeinvariant”,”hourly”, “daily”, “monthly”, “sat1000”,
“sat1330”, “sat2200”, “sat0130” \</p>
<p>Note that VerticalCoordinateType is dependent on the variable!! It is
not a question about “vertical coordinate type used in model
simulations”!</p>
<p>The script copies files on norstore into</p>
<ul class="simple">
<li>/projects/NS2345K/CAM-Oslo/DO_AEROCOM/_/renamed/<a href="#id3"><span class="problematic" id="id4">*</span></a>*</li>
</ul>
<p>ESMval CIS JASMIN platform and tools</p>
<p>ESMVALtool
<a class="reference external" href="http://www.geosci-model-dev-discuss.net/8/7541/2015/gmdd-8-7541-2015-discussion.html">http://www.geosci-model-dev-discuss.net/8/7541/2015/gmdd-8-7541-2015-discussion.html</a></p>
<p>cis tools <a class="reference external" href="http://www.cistools.net">http://www.cistools.net</a></p>
<p>JASMIN <a class="reference external" href="http://www.jasmin.ac.uk/services/jasmin-analysis-platform/">http://www.jasmin.ac.uk/services/jasmin-analysis-platform/</a></p>
<p>Post analysis and workup of CAM diagnostics output tables</p>
<p>A tool for post analysis of (multiple) CAM diagnostics ASCII tables can
be found in the following repository:</p>
<p>GitHub <a class="reference external" href="https://github.com/jgliss/noresm_diag_postproc">https://github.com/jgliss/noresm_diag_postproc</a></p>
<p>To get started, please follow the instructions in repository README
(displayed in repository). Currently, the main analysis tool is a
jupyter IPython notebook called</p>
<p>//<strong>analysis_tool.ipynb</strong>//
(<a class="reference external" href="https://github.com/jgliss/noresm_diag_postproc/blob/master/analysis_tool.ipynb">https://github.com/jgliss/noresm_diag_postproc/blob/master/analysis_tool.ipynb</a>)</p>
<p>which includes more detailed instructions about setup and options.</p>
<p>Use the notebook</p>
<p><a class="reference external" href="https://github.com/jgliss/noresm_diag_postproc/blob/master/download_tables.ipynb">https://github.com/jgliss/noresm_diag_postproc/blob/master/download_tables.ipynb</a></p>
<p>to download local copies of result tables using a list of URL’s.</p>
<ul class="simple">
<li>Short summary:<a href="#id5"><span class="problematic" id="id6">*</span></a>*</li>
</ul>
<p>The notebook reads multiple diagnostics files (runs) into one long table
and creates heatmap plots of //Bias, RMSE and RMSE relative error// for
a subset of variables (rows -&gt; y-axis of heatmap) vs. the individual
runs (columns -&gt; xaxis).</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>NOTE:<a href="#id7"><span class="problematic" id="id8">*</span></a>* In the current version, you need to download all tables</dt>
<dd>that you are interested in as csv or</dd>
</dl>
</li>
</ul>
<p>ascii into one directory, that is specified in the header of the
notebook.</p>
<p>Variable groups can be defined in this config file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jgliss</span><span class="o">/</span><span class="n">noresm_diag_postproc</span><span class="o">/</span><span class="n">blob</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">var_groups</span><span class="o">.</span><span class="n">ini</span>
</pre></div>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt>NOTE:<a href="#id9"><span class="problematic" id="id10">*</span></a>* If you add groups to this file in your local copy of the</dt>
<dd>repository, please consider sending</dd>
</dl>
</li>
</ul>
<p>the updated to <a class="reference external" href="mailto:jonasg&#37;&#52;&#48;met&#46;no">jonasg<span>&#64;</span>met<span>&#46;</span>no</a> or to submit a pull request, so that the
remote repository remains up to date.</p>
<ul class="simple">
<li>Troubleshooting**</li>
</ul>
<p>If you run into problems, please raise an issue in the repository or
contact <a class="reference external" href="mailto:jonasg&#37;&#52;&#48;met&#46;no">jonasg<span>&#64;</span>met<span>&#46;</span>no</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usingtheissuetracker.html" class="btn btn-neutral float-right" title="Using the issue tracker" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="settingupcamonlinuxpc.html" class="btn btn-neutral" title="Setting up CAM on your own linux PC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Anne Fouilloux

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>