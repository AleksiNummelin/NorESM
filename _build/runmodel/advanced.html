

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Advanced configuration (NorESM1) &mdash; norESM  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Advanced configuration of NorESM2" href="advancednoresm2.html" />
    <link rel="prev" title="Newbies guide to running NorESM" href="newbie.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> norESM
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Content:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../start.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="newbie.html">Newbies guide to running NorESM</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced configuration (NorESM1)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#understanding-compsets">Understanding compsets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#amip-type-simulations">AMIP type simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-with-offline-aerosol-interaction">Running with offline aerosol interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-of-look-up-tables-for-aerosol-optics-and-activation-to-cloud-droplets">Use of look-up tables for aerosol optics and activation to cloud droplets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-of-chemistry">Use of chemistry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advancednoresm2.html">Advanced configuration of NorESM2</a></li>
<li class="toctree-l1"><a class="reference internal" href="fluxescrossingboundaries.html">Fluxes crossing boundaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="cmip6_volcanic_forcing.html">CMIP6 volcanic forcing</a></li>
<li class="toctree-l1"><a class="reference internal" href="cmip6emissionsofshortlivedcomponents.html">CMIP6 emissions of short-lived components</a></li>
<li class="toctree-l1"><a class="reference internal" href="noresm2_output.html">Atmospheric output for some commonly used configurations of NorESM2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../settingupcamonlinuxpc.html">Setting up CAM on your own linux PC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeldiagnostics.html">Model Diagnostic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingtheissuetracker.html">Using the issue tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testlist.html">Test list for NorESM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gitbestpractice.html">Obtain a copy of the model (using git)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gitbestpractice.html#verify-that-you-have-the-correct-checkout">Verify that you have the correct checkout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gitbestpractice.html#modify-files">Modify files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gitbestpractice.html#get-modifications-from-github">Get modifications from github</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gitbestpractice.html#send-modifications-to-github">Send modifications to github</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gitbestpractice.html#if-you-don-t-understand-and-want-to-get-back-to-svn">If you don’t understand and want to get back to svn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html">What is a branch?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#when-should-i-work-on-a-branch">When should I work on a branch?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#how-should-i-name-the-branch">How should I name the branch?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#a-note-on-branch-tag-naming">A note on branch / tag naming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#how-and-when-should-i-merge-from-trunk-to-my-branch">How and when should I merge from trunk to my branch?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#how-can-i-merge-my-branch-back-into-the-trunk">How can I merge my branch back into the trunk?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#what-is-a-tag">What is a tag?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#when-should-i-create-a-tag">When should I create a tag?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#what-tags-exist">What tags exist?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#how-should-i-name-the-tag">How should I name the tag?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#tagging-noresm0-and-noresm1-branches">Tagging noresm0 and noresm1 branches?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#case-1">Case 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#case-2">Case 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#case-3">Case 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#what-should-be-stated-in-the-commit-message">What should be stated in the commit message?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#what-should-be-stated-in-the-copy-message-of-a-branch">What should be stated in the copy message of a branch?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnbestpractice.html#what-should-be-stated-in-the-copy-message-of-a-tag">What should be stated in the copy message of a tag?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../svnnorstorehowto.html">Subversion how-to for NorStore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uncertainaerosolparameters.html">Uncertain parameters (which can be discussed) in the aerosol model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeldiagnostics.html">Model Diagnostic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../norstoretape.html">NorStore Tape Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../norstorearchive.html">NorStore Research Data Archive: Guidelines for ingestion of NorESM output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects.html">Existing projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">norESM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Advanced configuration (NorESM1)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/runmodel/advanced.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="advanced-configuration-noresm1">
<span id="advanced"></span><h1>Advanced configuration (NorESM1)<a class="headerlink" href="#advanced-configuration-noresm1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="understanding-compsets">
<h2>Understanding compsets<a class="headerlink" href="#understanding-compsets" title="Permalink to this headline">¶</a></h2>
<p>A compset is a collection of configuration parameters which describe a
specific case. NorESM has several pre-defined compsets. The CCSM users
guide provides information on configuring your own compsets. The
compsets define things like //how many processors will be used in this
case //, //which options go to cam_oslo in this case //</p>
<p>For existing composets, search for the file config_compsets.xml in your
$NORESM folder. They can also all be printed by going to $NORESM/scripts
and type the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">create_newcase</span> <span class="o">-</span><span class="nb">list</span>
</pre></div>
</div>
</div>
<div class="section" id="amip-type-simulations">
<h2>AMIP type simulations<a class="headerlink" href="#amip-type-simulations" title="Permalink to this headline">¶</a></h2>
<p>For AMIP type simulations, using the data ocean model with prescribed
(observed) SST, use one of the pre-defined compsets with long names
starting with “<a href="#id1"><span class="problematic" id="id2">NF_</span></a>”. One, used in the AMIP run for CMIP5, is
“NF_1979-2005_ AER_ AMIP_OBS”, with the short name “NF2005AERAMIPO”.
To create a Case with the chosen name AMIPtest for this compset, as an
example, write</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">create_newcase</span>  <span class="o">-</span><span class="n">case</span> <span class="o">../</span><span class="n">cases</span><span class="o">/</span><span class="n">AMIPtest</span><span class="o">/</span> <span class="o">-</span><span class="n">mach</span> <span class="n">hexagon</span> <span class="o">-</span><span class="n">res</span> <span class="n">f19_f19</span>  <span class="o">-</span><span class="n">compset</span> <span class="n">NF2005AERAMIPO</span>
</pre></div>
</div>
</div>
<div class="section" id="running-with-offline-aerosol-interaction">
<h2>Running with offline aerosol interaction<a class="headerlink" href="#running-with-offline-aerosol-interaction" title="Permalink to this headline">¶</a></h2>
<p>In order to limit the number of compsets there are (at present) no
compsets available for automatically setting up the model in offline
mode (i.e., the meteorology is forced by aerosol optics and CDNC from
CAM4 instead of CAM4-Oslo) or for taking out extra AeroCom diagnostics,
which requires numerous additional subroutine calls and therefore is
quite expensive to run, both with respect to CPU time and memory. To set
up the model in offline mode (before compiling), simply find all
subroutines which contain the logical variable AEROFFL (e.g.: grep
AEROFFL *.F90), and replace all instances of</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#. undef AEROFFL</span>
</pre></div>
</div>
<p>and</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!#define AEROFFL
</pre></div>
</div>
<p>with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#. define AEROFFL</span>
</pre></div>
</div>
<p>This is useful for short simulations where we want to look at direct
and/or indirect radiative forcing by aerosols, since the meteorology
does not change with changing aerosol emissions (e.g. for year 1850 and
2000). Similarly, to set up the model to take out additional aerosol
output for use in AeroCom or other studies where there is a need for
extensive aerosol diagnostics, find all subroutines which contain the
logical variable AEROCOM (e.g.: grep AEROCOM *.F90), and then replace
all</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!#define AEROCOM
</pre></div>
</div>
<p>with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#. define AEROCOM</span>
</pre></div>
</div>
<p>The model may be run with any combination of these options: with AEROFFL
only, with AEROCOM only, or with AEROFFL and AEROCOM activated at the
same time.</p>
<p>See also presentation from NorESM workshop November 28’th 2013.</p>
</div>
<div class="section" id="use-of-look-up-tables-for-aerosol-optics-and-activation-to-cloud-droplets">
<h2>Use of look-up tables for aerosol optics and activation to cloud droplets<a class="headerlink" href="#use-of-look-up-tables-for-aerosol-optics-and-activation-to-cloud-droplets" title="Permalink to this headline">¶</a></h2>
<p>See presentation from NorESM workshop November 28’th 2013:</p>
<p>The look-up table code, AeroTab, is now available through subversion
under cam/tools/AeroTab on norEsmTrunk. To obtain a local copy
(myAeroTab) of the newest version without checking out the whole NorESM
model, run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">svn</span> <span class="n">checkout</span>
 <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">svn</span><span class="o">.</span><span class="n">met</span><span class="o">.</span><span class="n">no</span><span class="o">/</span><span class="n">NorESM</span><span class="o">/</span><span class="n">noresm</span><span class="o">/</span><span class="n">trunk</span><span class="o">/</span><span class="n">noresm</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="n">atm</span><span class="o">/</span><span class="n">cam</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">AeroTab</span>
 <span class="n">myAeroTab</span>
</pre></div>
</div>
<p>Or, if you are interested in the CMIP5 version (with some updates), run
instead</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">svn</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">r</span> <span class="mi">199</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">svn</span><span class="o">.</span><span class="n">met</span><span class="o">.</span><span class="n">no</span><span class="o">/</span><span class="n">NorESM</span><span class="o">/</span><span class="n">noresm</span><span class="o">/</span><span class="n">trunk</span><span class="o">/</span><span class="n">noresm</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="n">atm</span><span class="o">/</span><span class="n">cam</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">AeroTab</span>
<span class="n">myAeroTab</span>
</pre></div>
</div>
</div>
<div class="section" id="use-of-chemistry">
<h2>Use of chemistry<a class="headerlink" href="#use-of-chemistry" title="Permalink to this headline">¶</a></h2>
<p>See presentation from NorESM workshop November 28’th 2013:</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="advancednoresm2.html" class="btn btn-neutral float-right" title="Advanced configuration of NorESM2" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="newbie.html" class="btn btn-neutral" title="Newbies guide to running NorESM" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Anne Fouilloux

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>