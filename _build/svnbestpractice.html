

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SVN - Best Practice/FAQ &mdash; norESM  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Subversion how-to for NorStore" href="svnnorstorehowto.html" />
    <link rel="prev" title="Obtain a copy of the model (using git)" href="gitbestpractice.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> norESM
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Content:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="start.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/newbie.html">Newbies guide to running NorESM</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/advanced.html">Advanced configuration (NorESM1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/advancednoresm2.html">Advanced configuration of NorESM2</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/fluxescrossingboundaries.html">Fluxes crossing boundaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/cmip6_volcanic_forcing.html">CMIP6 volcanic forcing</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/cmip6emissionsofshortlivedcomponents.html">CMIP6 emissions of short-lived components</a></li>
<li class="toctree-l1"><a class="reference internal" href="runmodel/noresm2_output.html">Atmospheric output for some commonly used configurations of NorESM2</a></li>
<li class="toctree-l1"><a class="reference internal" href="settingupcamonlinuxpc.html">Setting up CAM on your own linux PC</a></li>
<li class="toctree-l1"><a class="reference internal" href="modeldiagnostics.html">Model Diagnostic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="usingtheissuetracker.html">Using the issue tracker</a></li>
<li class="toctree-l1"><a class="reference internal" href="testlist.html">Test list for NorESM</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html">Obtain a copy of the model (using git)</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html#verify-that-you-have-the-correct-checkout">Verify that you have the correct checkout</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html#modify-files">Modify files</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html#get-modifications-from-github">Get modifications from github</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html#send-modifications-to-github">Send modifications to github</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitbestpractice.html#if-you-don-t-understand-and-want-to-get-back-to-svn">If you don’t understand and want to get back to svn</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">SVN - Best Practice/FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="#branches">Branches</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-a-branch">What is a branch?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#when-should-i-work-on-a-branch">When should I work on a branch?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-should-i-name-the-branch">How should I name the branch?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-note-on-branch-tag-naming">A note on branch / tag naming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#naming-of-feature-branches-and-associated-tags">Naming of feature branches and associated tags</a></li>
<li class="toctree-l3"><a class="reference internal" href="#naming-of-release-branches-and-associated-tags">Naming of release branches and associated tags</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#how-and-when-should-i-merge-from-trunk-to-my-branch">How and when should I merge from trunk to my branch?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-can-i-merge-my-branch-back-into-the-trunk">How can I merge my branch back into the trunk?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-a-tag">What is a tag?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#when-should-i-create-a-tag">When should I create a tag?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-tags-exist">What tags exist?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-should-i-name-the-tag">How should I name the tag?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tagging-noresm0-and-noresm1-branches">Tagging noresm0 and noresm1 branches?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#case-1">Case 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#case-2">Case 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#case-3">Case 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-should-be-stated-in-the-commit-message">What should be stated in the commit message?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-should-be-stated-in-the-copy-message-of-a-branch">What should be stated in the copy message of a branch?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-should-be-stated-in-the-copy-message-of-a-tag">What should be stated in the copy message of a tag?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="svnnorstorehowto.html">Subversion how-to for NorStore</a></li>
<li class="toctree-l1"><a class="reference internal" href="uncertainaerosolparameters.html">Uncertain parameters (which can be discussed) in the aerosol model</a></li>
<li class="toctree-l1"><a class="reference internal" href="modeldiagnostics.html">Model Diagnostic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="norstoretape.html">NorStore Tape Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="norstorearchive.html">NorStore Research Data Archive: Guidelines for ingestion of NorESM output</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Existing projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">norESM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>SVN - Best Practice/FAQ</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/svnbestpractice.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="svn-best-practice-faq">
<span id="svnbestpractice"></span><h1>SVN - Best Practice/FAQ<a class="headerlink" href="#svn-best-practice-faq" title="Permalink to this headline">¶</a></h1>
<p>We encourage developers to use branches when developing the model. Do
you find version control, branching and merging a bit difficult, try the
NorESM svn branch/merge tutorial to understand branching and merging. In
30 minutes you can become an svn wizard</p>
<p>Follow this link to find the tutorial:
<a class="reference external" href="NORESM:SvnTutorial">NORESM:SvnTutorial</a></p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Note: As of November 13th 2015, NorESM uses git as version control</dt>
<dd>system. The rules and guidelines for merging/branching, tags and
branch names are still valid in the new system**</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="branches">
<h1>Branches<a class="headerlink" href="#branches" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-a-branch">
<h2>What is a branch?<a class="headerlink" href="#what-is-a-branch" title="Permalink to this headline">¶</a></h2>
<p>A branch is your own version of the repository. Sometimes it is nice to
work on a feature “in private” without having to relate to other
developers’ codes. And sometimes you want to work on something which
takes some time before it is finished.</p>
<p>In these cases you can create a //branch//. You can work on it on your
own or in a team of colleques. When you are happy with the the content
of the branch, you can merge it back to the //trunk//.</p>
<p>The //trunk// is considered a safe repository. **The code in the trunk
should always have passed a set of tests to make sure it is
stable.(<a class="reference external" href="https://wiki.met.no/noresm/testlist)**">https://wiki.met.no/noresm/testlist)**</a></p>
<p>Branches let you take advantage of the svn features, but without having
to worry every day that your code passes the tests.</p>
<p>Create a branch with
(<a class="reference external" href="http://svnbook.red-bean.com/en/1.7/svn.branchmerge.using.html">http://svnbook.red-bean.com/en/1.7/svn.branchmerge.using.html</a>)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">svn</span> <span class="n">copy</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">svn</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">repos</span><span class="o">/</span><span class="n">calc</span><span class="o">/</span><span class="n">trunk</span>
 <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">svn</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">repos</span><span class="o">/</span><span class="n">calc</span><span class="o">/</span><span class="n">branches</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">calc</span><span class="o">-</span><span class="n">branch</span>  <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Creating a private branch of /calc/trunk.&quot;</span>

<span class="ow">or</span> <span class="n">specifically</span> <span class="k">for</span> <span class="n">the</span> <span class="n">NorESM</span> <span class="n">repository</span> <span class="k">with</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">``&nbsp;svn&nbsp;copy&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">```https://svn.met.no/NorESM/noresm/tags/trunk2.0-1</span></code> &lt;<a class="reference external" href="https://svn.met.no/NorESM/noresm/tags/trunk2.0-1">https://svn.met.no/NorESM/noresm/tags/trunk2.0-1</a>&gt;`__``&nbsp;``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">```https://svn.met.no/NorESM/noresm/branches/privateMYPORJECT_trunk2.0-1</span></code> &lt;<a class="reference external" href="https://svn.met.no/NorESM/noresm/branches/privateMYPORJECT_trunk2.0-1">https://svn.met.no/NorESM/noresm/branches/privateMYPORJECT_trunk2.0-1</a>&gt;`__``&nbsp;&nbsp;``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-m&nbsp;“Creating&nbsp;a&nbsp;project&nbsp;branch&nbsp;of&nbsp;tags/trunk2.0-1.”&nbsp;``</div>
</div>
<p>Then check out the branch using svn checkout $BRANCHURL
nameOfBranchOnMyPC</p>
<p>In git: First create your new branch locally and then make the remote
aware of the new branch like so: git checkout -b my_branch_name git push
-u origin my_branch_name</p>
<p>..and make sure your .gitconfig-file is configured for doing a merge
(for example):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">merge</span><span class="p">]</span>
</pre></div>
</div>
<p>&nbsp;&nbsp;&nbsp;tool&nbsp;=&nbsp;vimdiff</p>
<blockquote>
<div><p>[diff]</p>
<p>tool&nbsp;=&nbsp;vimdiff</p>
</div></blockquote>
</div>
<div class="section" id="when-should-i-work-on-a-branch">
<h2>When should I work on a branch?<a class="headerlink" href="#when-should-i-work-on-a-branch" title="Permalink to this headline">¶</a></h2>
<p>In most cases the answer is “always”. However look at it this way:</p>
<p>If you work directly on the trunk you have to check that your code
passes the tests every time you change the code. This is cumbersome and
takes a lot of time. However if you are on a branch, you can work
peacefully together with your small team taking full advantage of the
version control system. In the end, when you and your teammates are
happy with the changes, you perform the tests and merge back to trunk.</p>
<p>You should obviously test your code also before you commit to a branch,
but for a branch the test does not include running and analyzing long
simulations.</p>
</div>
<div class="section" id="how-should-i-name-the-branch">
<h2>How should I name the branch?<a class="headerlink" href="#how-should-i-name-the-branch" title="Permalink to this headline">¶</a></h2>
<p>The NorESM branches have the following **naming convension :
{PurposeOfLife}_{ParentTagName}**. This means that a branch name should
state **why** it is created and **where** it is created from.</p>
<p>PurposeOfLife is a text string (allowed characters are a-z, A-Z, 0-9 and
“.”) that must start with //feature//, //release//, //project// or
//private//, where</p>
<div class="line-block">
<div class="line">``&nbsp;*&nbsp;a&nbsp;//feature//&nbsp;branch&nbsp;is&nbsp;a&nbsp;temporary&nbsp;branch&nbsp;created&nbsp;to&nbsp;work&nbsp;on&nbsp;a&nbsp;complex&nbsp;change&nbsp;without&nbsp;interfering&nbsp;with&nbsp;the&nbsp;stability&nbsp;of&nbsp;/trunk&nbsp;(or&nbsp;another&nbsp;parent&nbsp;branch).&nbsp;Feature&nbsp;branches&nbsp;are&nbsp;always&nbsp;reintegrated.&nbsp;See&nbsp;also&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">```http://svnbook.red-bean.com/en/1.7/svn.branchmerge.commonpatterns.html</span></code> &lt;<a class="reference external" href="http://svnbook.red-bean.com/en/1.7/svn.branchmerge.commonpatterns.html">http://svnbook.red-bean.com/en/1.7/svn.branchmerge.commonpatterns.html</a>&gt;`__</div>
<div class="line">``&nbsp;*&nbsp;a&nbsp;//release//&nbsp;branch&nbsp;is&nbsp;created&nbsp;if&nbsp;a&nbsp;version&nbsp;with&nbsp;frozen&nbsp;functionality&nbsp;is&nbsp;desired.&nbsp;The&nbsp;development&nbsp;on&nbsp;the&nbsp;release&nbsp;branch&nbsp;itself&nbsp;is&nbsp;limited&nbsp;to&nbsp;bug&nbsp;fixes,&nbsp;addition&nbsp;of&nbsp;forcing&nbsp;scenarios&nbsp;and&nbsp;other&nbsp;minor&nbsp;changes.&nbsp;Releases&nbsp;branches&nbsp;are&nbsp;not&nbsp;reintegrated.&nbsp;&nbsp;``</div>
<div class="line">``&nbsp;*&nbsp;a&nbsp;//project&nbsp;//&nbsp;branch&nbsp;is&nbsp;similar&nbsp;to&nbsp;a&nbsp;release&nbsp;branch.&nbsp;For&nbsp;some&nbsp;projects&nbsp;a&nbsp;specific&nbsp;version&nbsp;with&nbsp;small&nbsp;changes&nbsp;might&nbsp;be&nbsp;required&nbsp;to&nbsp;do&nbsp;specific&nbsp;model&nbsp;runs.&nbsp;It&nbsp;is&nbsp;important&nbsp;that&nbsp;all&nbsp;members&nbsp;of&nbsp;the&nbsp;project&nbsp;use&nbsp;the&nbsp;same&nbsp;code.&nbsp;If&nbsp;the&nbsp;project&nbsp;involves&nbsp;major&nbsp;development&nbsp;tasks,&nbsp;the&nbsp;project&nbsp;team&nbsp;should&nbsp;concider&nbsp;creating&nbsp;a&nbsp;//feature//&nbsp;branch&nbsp;instead.&nbsp;A&nbsp;//project//&nbsp;branch&nbsp;is&nbsp;likely&nbsp;not&nbsp;reintegrated.``</div>
<div class="line">``&nbsp;*&nbsp;a&nbsp;//private//&nbsp;branch&nbsp;can&nbsp;be&nbsp;created&nbsp;if&nbsp;a&nbsp;project&nbsp;requires&nbsp;a&nbsp;strongly&nbsp;tailored&nbsp;version&nbsp;of&nbsp;the&nbsp;model,&nbsp;that&nbsp;typically&nbsp;is&nbsp;maintained&nbsp;by&nbsp;only&nbsp;one&nbsp;person.&nbsp;Commits&nbsp;to&nbsp;a&nbsp;private&nbsp;branch&nbsp;should&nbsp;be&nbsp;agreed&nbsp;on&nbsp;with&nbsp;the&nbsp;branch&nbsp;creator.&nbsp;Private&nbsp;branches&nbsp;are&nbsp;not&nbsp;necessarily&nbsp;reintegrated.&nbsp;``</div>
</div>
<p>ParentTagName is the name of an existing noresm tag.</p>
<p>Examples of valid branch names are:</p>
<div class="line-block">
<div class="line">``&nbsp;*&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">*``featureIceActivation_trunk2.0-1``*\</span> <span class="pre">``&nbsp;(development&nbsp;of&nbsp;ice&nbsp;activation&nbsp;feature,&nbsp;created&nbsp;from&nbsp;tag&nbsp;``\</span> <span class="pre">*``trunk2.0-1``*\</span> <span class="pre">``)</span></code></div>
<div class="line">``&nbsp;*&nbsp;<a href="#id1"><span class="problematic" id="id2">``</span></a><em>``release2.0.0_trunk2.0-19``</em>``&nbsp;(release&nbsp;branch&nbsp;created&nbsp;from&nbsp;tag&nbsp;<a href="#id3"><span class="problematic" id="id4">``</span></a><em>``trunk2.0-19``</em><a href="#id5"><span class="problematic" id="id6">``</span></a>)&nbsp;``</div>
<div class="line">``&nbsp;*&nbsp;<a href="#id7"><span class="problematic" id="id8">``</span></a><em>``release2.0.1_release2.0.0-15``</em>``&nbsp;(release&nbsp;branch&nbsp;created&nbsp;from&nbsp;tag&nbsp;<a href="#id9"><span class="problematic" id="id10">``</span></a><em>``release2.0.0-15``</em><a href="#id11"><span class="problematic" id="id12">``</span></a>)&nbsp;``</div>
<div class="line">``&nbsp;*&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">*``privateHiatusStudy_release2.0.1-3``*\</span> <span class="pre">``&nbsp;(private&nbsp;branch&nbsp;for&nbsp;Ingo's&nbsp;hiatus&nbsp;study,&nbsp;created&nbsp;from&nbsp;tag&nbsp;``\</span> <span class="pre">*``release2.0.1-3``*\</span> <span class="pre">``)</span></code></div>
<div class="line">``&nbsp;*&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">*``projectEXPECT_cmip5-r143-1``*\</span> <span class="pre">``&nbsp;(branch&nbsp;created&nbsp;for&nbsp;use&nbsp;in&nbsp;project&nbsp;named&nbsp;EXPECT,&nbsp;created&nbsp;from&nbsp;tag&nbsp;``\</span> <span class="pre">*``cmip5-r143-1``*\</span> <span class="pre">``)</span></code></div>
</div>
<p>Note that in this scheme a new branch is never branched off directly
from trunk or another branch. **A tag MUST be created before creating a
branch** (see section on tags below).</p>
<p>Note that purposeOfLife of release-branches contains version numbers.
“release2.0.0” and “release2.0.1” are “purposeOfLife”. When creating
release-branches, please agree on numbering with &lt;<a class="reference external" href="mailto:Mats&#46;Bentsen&#37;&#52;&#48;uni&#46;no">Mats<span>&#46;</span>Bentsen<span>&#64;</span>uni<span>&#46;</span>no</a>&gt;.
**The version numbers in release-branches’ “purposeOfLife” should not
be confused with “increasingVersionNumber” used to make tag-names
unique.**</p>
</div>
<div class="section" id="a-note-on-branch-tag-naming">
<h2>A note on branch / tag naming<a class="headerlink" href="#a-note-on-branch-tag-naming" title="Permalink to this headline">¶</a></h2>
<div class="section" id="naming-of-feature-branches-and-associated-tags">
<h3>Naming of feature branches and associated tags<a class="headerlink" href="#naming-of-feature-branches-and-associated-tags" title="Permalink to this headline">¶</a></h3>
<p>Consider the following example: A small group decides to have a branch
of their own. The group defines their branch’s purpose of life as
“featureLandSurfaceModeling”.</p>
<p>They can now branch off from trunk and create the branch
<em>featureLandSurfaceModeling_trunk2.0-1</em>. They will work happily on their
branch until one day they have completed their feature. In the mean time
they have tagged their branch a couple of times as
<em>featureLandSurfaceModeling-1</em>, <em>featureLandSurfaceModeling-2</em>.</p>
<p>After the feature is completed, the branch is merged back to trunk, and
following svn recommendations, the branch should now be considered dead.</p>
<p>The team still want their branch on which they cooperate well. They
should now re-generate their branch from trunk, for example
<em>featureLandSurfaceModeling_trunk2.0-40</em>. This is OK. The repository
should now have two branches, but by inspection of branch names it is
easy to see that <em>featureLandSurfaceModeling_trunk2.0-40</em> is the recent
one and the other is a dead end.</p>
<p>While developing on <em>featureLandSurfaceModeling_trunk2.0-40</em>, the team
decides to tag their model twice, creating the tags
<em>featureLandSurfaceModeling-3</em> and <em>featureLandSurfaceModeling-4</em>.</p>
<p>The repository now has four tags: <em>featureLandSurfaceModeling-1</em>,
<em>featureLandSurfaceModeling-2</em>, <em>featureLandSurfaceModeling-3</em> and
<em>featureLandSurfaceModeling-4</em>. They originate from two different
branches. However this is OK in the NorESM naming convention scheme!</p>
</div>
<div class="section" id="naming-of-release-branches-and-associated-tags">
<h3>Naming of release branches and associated tags<a class="headerlink" href="#naming-of-release-branches-and-associated-tags" title="Permalink to this headline">¶</a></h3>
<p>The PurposeOfLife string of a release branch should begin with “release”
followed by .. (e.g., <em>release2.0.1</em>).</p>
<p>The numbers and are inherited from the tag from which the branch is
created. The number is set to 0 in the special case that the parent is a
trunk tag (e.g., <em>release2.0.0_trunk2.0-19</em>) and augmented if the
release branch is created from an existing release branch tag (e.g.,
<em>release2.0.1_release2.0.0-5</em>).</p>
<p>For more information on and see section “How should I name the tag”.</p>
</div>
</div>
<div class="section" id="how-and-when-should-i-merge-from-trunk-to-my-branch">
<h2>How and when should I merge from trunk to my branch?<a class="headerlink" href="#how-and-when-should-i-merge-from-trunk-to-my-branch" title="Permalink to this headline">¶</a></h2>
<p>You can decide this for yourself. The main hypothesis is that the trunk
is always stable and working, so you will not harm your branch by
merging from trunk. If you are working on something which you will
finally merge back to the trunk, you can merge often. Then the final
merge will be easier.</p>
<p>Just use svn merge ^/noresm/trunk (The “^” means “the URL of the
repository’s root directory” in newer versions of svn. In older versions
you need to give full URL)</p>
</div>
<div class="section" id="how-can-i-merge-my-branch-back-into-the-trunk">
<h2>How can I merge my branch back into the trunk?<a class="headerlink" href="#how-can-i-merge-my-branch-back-into-the-trunk" title="Permalink to this headline">¶</a></h2>
<p>You can merge to trunk after your changed code has passed a list of
tests. The tests are available here: <a class="reference external" href="https://wiki.met.no/noresm/testlist">https://wiki.met.no/noresm/testlist</a></p>
<p>If your code does not pass the tests, you can **not** merge your code
back to the trunk</p>
<p>Note that in svn, **you can only merge ONE time from your branch to the
trunk**, or you risk making a mess of the system! (See
<a class="reference external" href="http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html">http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html</a> ==&gt;
“Reintegrating a branch”, note the statement **Once a –reintegrate
merge is done from branch to trunk, the branch is no longer usable for
further work”<a href="#id13"><span class="problematic" id="id14">**</span></a>). N.B. There is a workaround to this, described in
<a class="reference external" href="http://svnbook.red-bean.com/en/1.7/svn.branchmerge.advanced.html#svn.branchmerge.advanced.reintegratetwice">http://svnbook.red-bean.com/en/1.7/svn.branchmerge.advanced.html#svn.branchmerge.advanced.reintegratetwice</a></p>
<p>The merge command (from trunk) will be something like
(<a class="reference external" href="http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html">http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html</a>)
svn merge –reintegrate $BRANCHURL</p>
<p>Using git, just use git merge branchNameIWantToMergeWith</p>
</div>
<div class="section" id="what-is-a-tag">
<h2>What is a tag?<a class="headerlink" href="#what-is-a-tag" title="Permalink to this headline">¶</a></h2>
<p>A tag is a version of the model which should be considered “frozen”. It
makes sense to make a new “tag” for a production system, for example a
specific version which should be used for many runs.</p>
<p>In svn notation, there is no difference between a branch and a tag. It
is just a question of naming convension. Recommended convension is that
tags are branches saved under the “tags” subdirectory and a branch is
saved under the “branches” directory.</p>
<ul class="simple">
<li><ul class="first">
<li>In NorESM tags are considered frozen, and people are not allowed
to do developement on tagged versions.**</li>
</ul>
</li>
</ul>
<p>Create the tag with a command like
(<a class="reference external" href="http://svnbook.red-bean.com/en/1.6/svn.branchmerge.tags.html">http://svnbook.red-bean.com/en/1.6/svn.branchmerge.tags.html</a>)</p>
<div class="line-block">
<div class="line">``&nbsp;svn&nbsp;copy&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">```http://svn.example.com/repos/calc/trunk</span></code> &lt;<a class="reference external" href="http://svn.example.com/repos/calc/trunk">http://svn.example.com/repos/calc/trunk</a>&gt;`__``&nbsp;``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">```http://svn.example.com/repos/calc/tags/release-1.0</span></code> &lt;<a class="reference external" href="http://svn.example.com/repos/calc/tags/release-1.0">http://svn.example.com/repos/calc/tags/release-1.0</a>&gt;`__``&nbsp;``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-m&nbsp;“Tagging&nbsp;the&nbsp;1.0&nbsp;release&nbsp;of&nbsp;the&nbsp;‘calc’&nbsp;project.”``</div>
</div>
<blockquote>
<div>or specifically for the NorESM repository with</div></blockquote>
<div class="line-block">
<div class="line">``&nbsp;svn&nbsp;copy&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">```https://svn.met.no/NorESM/noresm/trunk</span></code> &lt;<a class="reference external" href="https://svn.met.no/NorESM/noresm/trunk">https://svn.met.no/NorESM/noresm/trunk</a>&gt;`__``&nbsp;``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">```https://svn.met.no/NorESM/noresm/tags/trunk2.0-2</span></code> &lt;<a class="reference external" href="https://svn.met.no/NorESM/noresm/tags/trunk2.0-2">https://svn.met.no/NorESM/noresm/tags/trunk2.0-2</a>&gt;`__``&nbsp;&nbsp;``</div>
<div class="line">``&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-m&nbsp;“Creating&nbsp;new&nbsp;tag&nbsp;of&nbsp;trunk.”&nbsp;``</div>
</div>
</div>
<div class="section" id="when-should-i-create-a-tag">
<h2>When should I create a tag?<a class="headerlink" href="#when-should-i-create-a-tag" title="Permalink to this headline">¶</a></h2>
<p>You should create a tag in the following cases:</p>
<div class="line-block">
<div class="line">``&nbsp;*&nbsp;When&nbsp;you&nbsp;want&nbsp;to&nbsp;create&nbsp;a&nbsp;branch!&nbsp;<strong>Always&nbsp;tag&nbsp;the&nbsp;model&nbsp;first&nbsp;and&nbsp;then&nbsp;create&nbsp;the&nbsp;branch&nbsp;from&nbsp;the&nbsp;tag</strong>.&nbsp;(If&nbsp;a&nbsp;tag&nbsp;has&nbsp;already&nbsp;been&nbsp;made&nbsp;at&nbsp;the&nbsp;point&nbsp;where&nbsp;you&nbsp;want&nbsp;to&nbsp;branch&nbsp;off,&nbsp;you&nbsp;don’t&nbsp;need&nbsp;to&nbsp;create&nbsp;a&nbsp;new&nbsp;tag!!)``</div>
<div class="line">``&nbsp;*&nbsp;A&nbsp;“released”&nbsp;version,&nbsp;a&nbsp;version&nbsp;which&nbsp;has&nbsp;been&nbsp;properly&nbsp;tested&nbsp;and&nbsp;which&nbsp;we&nbsp;recommend&nbsp;other&nbsp;users&nbsp;to&nbsp;run``</div>
<div class="line">``&nbsp;*&nbsp;A&nbsp;version&nbsp;which&nbsp;has&nbsp;been&nbsp;used&nbsp;for&nbsp;some&nbsp;specific&nbsp;paper&nbsp;(maybe&nbsp;you&nbsp;want&nbsp;to&nbsp;do&nbsp;more&nbsp;runs&nbsp;after&nbsp;referee&nbsp;comments)``</div>
</div>
</div>
<div class="section" id="what-tags-exist">
<h2>What tags exist?<a class="headerlink" href="#what-tags-exist" title="Permalink to this headline">¶</a></h2>
<p>All tags are in <a class="reference external" href="https://svn.met.no/viewvc/noresm/noresm/tags/">https://svn.met.no/viewvc/noresm/noresm/tags/</a>. Have a
look there to find out which tags exist before you create a new tag. In
order not to break the naming convension scheme, you need to know which
tags exist already!</p>
</div>
<div class="section" id="how-should-i-name-the-tag">
<h2>How should I name the tag?<a class="headerlink" href="#how-should-i-name-the-tag" title="Permalink to this headline">¶</a></h2>
<p>Tags created from trunk have the naming convention:</p>
<p>``&nbsp;trunk{MainModelVersion}.{MinorModelVersion}-{IncreasingVersionNumber}``</p>
<p>Tags created from branches have the naming convention:</p>
<p>``&nbsp;{BranchPurposeOfLife}-{IncreasingVersionNumber}``</p>
<p>Every time a release branch is created from trunk, then
MinorModelVersion is increased and IncreasingVersionNumber reset to 1.
If no new release branch is created, then MinorModelVersion stays the
same and IncreasingVersionNumber is increased.</p>
<ul class="simple">
<li><ul class="first">
<li>Important:<em>* If a user wants to create a tag from a freshly
created branch, then IncreasingVersionNumber should be set to 0
(e.g., *featureMicomDevelopment-0</em>). Be aware, however, that
creating a tag from a freshly created branch results in tag
duplication, e.g., if the branch is
<em>featureMicomDevelopment_trunk2.0-19</em> then
<em>featureMicomDevelopment-0</em> will be identical to <em>trunk2.0-19</em>.</li>
</ul>
</li>
</ul>
<p>MainModelVersion and MinorModelVersion are global counters while
IncreasingVersionNumber is local to the trunk or a specific branch.</p>
<p>Examples are:</p>
<div class="line-block">
<div class="line">``&nbsp;*&nbsp;<a href="#id15"><span class="problematic" id="id16">``</span></a><em>``trunk2.0-1``</em></div>
<div class="line">``&nbsp;*&nbsp;<a href="#id17"><span class="problematic" id="id18">``</span></a><em>``trunk2.0-2``</em></div>
<div class="line">``&nbsp;*&nbsp;<a href="#id19"><span class="problematic" id="id20">``</span></a><em>``featureIceActivation-1``</em></div>
<div class="line">``&nbsp;*&nbsp;<a href="#id21"><span class="problematic" id="id22">``</span></a><em>``release2.0.0-1``</em></div>
<div class="line">``&nbsp;*&nbsp;<a href="#id23"><span class="problematic" id="id24">``</span></a><em>``release2.0.0-2``</em></div>
<div class="line">``&nbsp;*&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">*``release2.0.1-1``*\</span> <span class="pre">``&nbsp;(associated&nbsp;branch&nbsp;created&nbsp;from&nbsp;tag&nbsp;release2.0.0-2)</span></code></div>
<div class="line">``&nbsp;*&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">*``privateHiatusStudy-1``*\</span> <span class="pre">``&nbsp;&nbsp;(owned&nbsp;by&nbsp;Ingo)</span></code></div>
<div class="line">``&nbsp;*&nbsp;<code class="docutils literal notranslate"><span class="pre">\</span> <span class="pre">*``privateKatlaStudy-1``*\</span> <span class="pre">``&nbsp;&nbsp;(owned&nbsp;by&nbsp;Øyvind)</span></code></div>
</div>
<p>Note how this is consistent with the branch naming scheme. **You
actually need to create a tag in order to give your branch a proper
name!**</p>
</div>
<div class="section" id="tagging-noresm0-and-noresm1-branches">
<h2>Tagging noresm0 and noresm1 branches?<a class="headerlink" href="#tagging-noresm0-and-noresm1-branches" title="Permalink to this headline">¶</a></h2>
<p>NorESM0 and NorESM1 had a quite random naming convension for branches
where branch names involved “noresm” and “revision numbers”. For example
a NorESM1 branch names is “noresm-ver1_cmip5-r112/”. When tagging these,
we need to know what is “purposeOfLife” of this branch. People tend to
talk about these branches as the “112-version” or the branch
“noresm-ver1_cmip5-r143/” as the “143 version”.</p>
<p>Therefore, even though it is confusing it is proposed here to use
“cmip5-r112” or “cmip5-r143” as purposeOfLife for these branches. So
tags created from these branches would be called “cmip5-r112-1”,
“cmip5-r112-2”, “cmip5-r143-1”, “cmip5-r143-2” etc.</p>
<ul class="simple">
<li><ul class="first">
<li>purposeOfLife of NorESM1 branches is therefore whatever follows
after “noresm-verX-” in the branch name**</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="case-1">
<h2>Case 1<a class="headerlink" href="#case-1" title="Permalink to this headline">¶</a></h2>
<p>//A user has performed a control simulation using a tagged NorESM
version. He/she wants to use this control simulation as baseline for
several new implementations. How should the user create/update working
branches without having to worry about changes in trunk that can affect
the result?//</p>
<p>This is straight forward. The user creates several branches based on the
original tag. Following the naming convension scheme, they all have a
different “PurposeOfLife” but they have the same ParentTagName. The
combination is a unique branch name for all the new implementations.</p>
<p>Importantly, “merge from trunk” - which is required to be able to
reintegrate the branch into trunk - has to be postponed until after
evaluation experiments for the new implementations have been performed.</p>
</div>
<div class="section" id="case-2">
<h2>Case 2<a class="headerlink" href="#case-2" title="Permalink to this headline">¶</a></h2>
<p>//A user group wants to develop one model component without constantly
having to worry about changes in other model components.//</p>
<p>A solution is to bundle new implementations for a specific component by
creating a super branch (e.g., <em>featureMicomDevelopment_trunk2.0-19</em>).</p>
<p>The super branch can then be used to create ordinary feature branches
for the individual implementations (e.g.,
<em>featureNewMixingScheme_featureMicomDevelopment-0</em>).</p>
<p>Reintegration into trunk is done in two steps: First, feature branches
from the individual implementations are reintegrated into the super
branch. Last, the super branch is reintegrated into trunk.</p>
</div>
<div class="section" id="case-3">
<h2>Case 3<a class="headerlink" href="#case-3" title="Permalink to this headline">¶</a></h2>
<p>// A tagged NorESM version has been used for the production of a certain
simulation. Part of the simulations has to be rerun with extended
diagnostic capability (e.g., with U10 output). How can I commit the
extended diagnostic capability to svn?//</p>
<p>One can imagine that something like this happened:</p>
<div class="line-block">
<div class="line">``&nbsp;*&nbsp;The&nbsp;originally&nbsp;tagged&nbsp;version&nbsp;was&nbsp;made&nbsp;from&nbsp;a&nbsp;branched&nbsp;called&nbsp;“release2.0.0_trunk2.0-45”``</div>
<div class="line">``&nbsp;*&nbsp;The&nbsp;experiment&nbsp;was&nbsp;run&nbsp;with&nbsp;“release2.0.0-3”``</div>
</div>
<p>When the update is needed there are two possibilities:</p>
<p>This is the normal (and simplest) case:</p>
<p>Update the “release2.0.0_trunk2.0-45” branch with the changes needed.
After the development is done on “release2.0.0_trunk2.0-45” brand, tag
this as “release2.0.0-4” and do the experiments.</p>
<p>In the mean time, someone has done a lot of bugfixing in
“release2.0.0_trunk2.0-45”, so the latest version of
“release2.0.0_trunk2.0-45” is significantly different from
“release2.0.0-3” and you are afraid including the bugfixes will change
the original results. You can not include all the bugfixes before doing
the extra simulations so using the latest version of
“release2.0.0_trunk2.0-45” is not an option.</p>
<p>In this case, create a new branch: “release2.0.1_release2.0.0-3”, update
it and tag it “release2.0.1-1”. **Note that in this case, you have
created a new branch with a different “purposeOfLife”: “release2.0.1” is
different from “release2.0.0”.**</p>
<p><code class="docutils literal notranslate"><span class="pre">=====&nbsp;SVN&nbsp;messages&nbsp;=====</span></code></p>
</div>
<div class="section" id="what-should-be-stated-in-the-commit-message">
<h2>What should be stated in the commit message?<a class="headerlink" href="#what-should-be-stated-in-the-commit-message" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><ul class="first">
<li>Always state the JIRA issue associated with the work**! This makes
the code changes pop up in JIRA!: For example “svn commit -m
“NE-100: These are the fixes needed to solve this issue” ” (see
<a class="reference external" href="https://wiki.met.no/noresm/usingtheissuetracker">https://wiki.met.no/noresm/usingtheissuetracker</a>)</li>
</ul>
</li>
</ul>
<p>The commit message should include a concise description of the committed
changes.</p>
<p>Furthermore, it should indicate whether the changes preserve
bit-reproducibility. If this information is omitted, then one should
assume that bit-identity is broken.</p>
<p>Examples 1:</p>
<p>``&nbsp;Added&nbsp;new&nbsp;compset&nbsp;COMPSETNAME,&nbsp;bit&nbsp;identical&nbsp;compared&nbsp;to&nbsp;revision&nbsp;r&nbsp;``</p>
<p>Examples 2:</p>
<p>``&nbsp;Added&nbsp;new&nbsp;diagnostics&nbsp;in&nbsp;cloud.F90,&nbsp;bit&nbsp;identical&nbsp;compared&nbsp;to&nbsp;revision&nbsp;r``</p>
</div>
<div class="section" id="what-should-be-stated-in-the-copy-message-of-a-branch">
<h2>What should be stated in the copy message of a branch?<a class="headerlink" href="#what-should-be-stated-in-the-copy-message-of-a-branch" title="Permalink to this headline">¶</a></h2>
<p>A more elaborated “purpose of life” than indicated by the branch name
can be provide as svn message when creating the branch. If a
corresponding jira issue exists, then the text provided to the issue
track can be reused here.</p>
</div>
<div class="section" id="what-should-be-stated-in-the-copy-message-of-a-tag">
<h2>What should be stated in the copy message of a tag?<a class="headerlink" href="#what-should-be-stated-in-the-copy-message-of-a-tag" title="Permalink to this headline">¶</a></h2>
<p>Ideally, the commit message of a tag should provide a complete change
history relative to the last tag. This information can be easily
extracted from the svn viewer.</p>
<p>Example 1: Change history: trunk-2.0 -&gt; trunk-2.1 (r190 -&gt; r198)</p>
<p>Revision 198</p>
<p><code class="docutils literal notranslate"><span class="pre">changes&nbsp;made&nbsp;in&nbsp;r198...</span></code></p>
<p>Revision 193</p>
<p><code class="docutils literal notranslate"><span class="pre">changes&nbsp;made&nbsp;in&nbsp;r193...</span></code></p>
<p>Revision 190</p>
<p><code class="docutils literal notranslate"><span class="pre">changes&nbsp;made&nbsp;in&nbsp;r190...</span></code></p>
<p>Example 2: Change history: trunk-2.3 -&gt; featureMicomDevelopment-1 (r200
-&gt; r205)</p>
<p>Revision 205</p>
<p><code class="docutils literal notranslate"><span class="pre">changes&nbsp;made&nbsp;in&nbsp;r205&nbsp;to&nbsp;branch&nbsp;featureMicomDevelopment...</span></code></p>
<p>Revision 202</p>
<p>``&nbsp;changes&nbsp;made&nbsp;in&nbsp;r202&nbsp;to&nbsp;branch&nbsp;featureMicomDevelopment…``</p>
<p>Revision 200</p>
<p>``&nbsp;changes&nbsp;made&nbsp;in&nbsp;r200&nbsp;to&nbsp;branch&nbsp;featureMicomDevelopment…``</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="svnnorstorehowto.html" class="btn btn-neutral float-right" title="Subversion how-to for NorStore" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gitbestpractice.html" class="btn btn-neutral" title="Obtain a copy of the model (using git)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Anne Fouilloux

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>